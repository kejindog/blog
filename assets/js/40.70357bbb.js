(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{306:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"metamask"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#metamask"}},[t._v("#")]),t._v(" MetaMask")]),t._v(" "),s("h2",{attrs:{id:"metamask-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#metamask-2"}},[t._v("#")]),t._v(" metamask")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜ç½‘ä¸‹è½½åœ°å€"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.metamask.io/guide/",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜æ–¹æ–‡æ¡£åœ°å€"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Metamask å°ç‹ç‹¸ï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„ä»¥å¤ªåŠé’±åŒ…ï¼Œèƒ½ç”¨å¸®åŠ©ç”¨æˆ·æ–¹ä¾¿çš„ç®¡ç†è‡ªå·±çš„ä»¥å¤ªåŠæ•°å­—èµ„äº§")]),t._v(" "),s("p",[t._v("ä¸€èˆ¬éƒ½æ˜¯chromeæ’ä»¶çš„å½¢å¼åŽ»ä½¿ç”¨çš„ã€‚")]),t._v(" "),s("p",[t._v("ä»¥ metamask é“¾æŽ¥æœ¬åœ° ganache åˆ›å»ºçš„æµ‹è¯•ç½‘ç»œä¸ºä¾‹")]),t._v(" "),s("h2",{attrs:{id:"ganache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ganache"}},[t._v("#")]),t._v(" ganache")]),t._v(" "),s("p",[t._v("ganache æ˜¯ä¸€ä¸ªä»¥å¤ªåŠçš„ä¸ªäººå¼€å‘çŽ¯å¢ƒï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢éƒ¨ç½²åˆçº¦ã€å¼€å‘ç¨‹åºå’Œè¿›è¡Œæµ‹è¯•ã€‚å®ƒæœ‰æ¡Œé¢ç‰ˆæœ¬å’Œå‘½ä»¤è¡Œå·¥å…·ç‰ˆæœ¬ï¼ŒåŒæ—¶æä¾›å¯¹windowsã€Macå’ŒLinuxçš„æ”¯æŒ")]),t._v(" "),s("p",[t._v("ganache æ˜¯ä¸€ä¸ªæœ¬åœ°ç‰ˆçš„ä»¥å¤ªåŠï¼Œæ˜¯æˆ‘ä»¬å¼€å‘çš„å¿…å¤‡å·¥å…·ã€‚")]),t._v(" "),s("p",[t._v("å› ä¸ºæµ‹è¯•ç½‘ç»œï¼ˆå…è´¹ï¼‰ï¼Œä½†æ˜¯æµ‹è¯•ç½‘ç»œå“åº”é€Ÿåº¦å¤ªæ…¢äº†ï¼Œæœ‰æ—¶å€™ä¸€ä¸ªäº¤æ˜“è¦è¿›è¡Œ10ç§’ï¼Œè™½ç„¶æµ‹è¯•ç½‘çš„å“åº”é€Ÿåº¦ç›¸å¯¹ä¸»ç½‘è€Œè¨€æ¯”è¾ƒå¿«ï¼ˆðŸ˜…ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæœ¬åœ°ç½‘ç»œï¼Œå¯ä»¥ä½“éªŒæ— ç¼è¡”æŽ¥çš„æ„Ÿè§‰ï¼Œå¿«å•Šã€‚")]),t._v(" "),s("h3",{attrs:{id:"ganache-ä¸‹è½½å®‰è£…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ganache-ä¸‹è½½å®‰è£…"}},[t._v("#")]),t._v(" ganache ä¸‹è½½å®‰è£…")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://trufflesuite.com/ganache/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ganache ä¸‹è½½åœ°å€"),s("OutboundLink")],1),t._v(" å„ä¸ªç‰ˆæœ¬éƒ½æœ‰")]),t._v(" "),s("p",[t._v("ganache åˆ›å»ºä¸€ä¸ªæœ¬åœ°æµ‹è¯•ç½‘ç»œ")]),t._v(" "),s("ol",[s("li",[t._v("æ‰“å¼€ç•Œé¢")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/img/ganache1.png")}}),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("ç‚¹å‡» quickstart å¿«é€Ÿç”Ÿæˆä¸€ä¸ªæœ¬åœ°ç½‘ç»œï¼Œæ‰¾åˆ°å³è¾¹çš„è®¾ç½®æŒ‰é’®ï¼Œç‚¹å‡»")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/img/ganache2.png")}}),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("æ³¨æ„ä¸Šé¢çš„ SERVE æ‰¾åˆ°å½“å‰ç½‘ç»œä¿¡æ¯ï¼Œéœ€è¦åœ¨metamaskæ·»åŠ ç½‘ç»œçš„æ—¶å€™ç”¨å¾—åˆ°")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/img/ganache3.png")}}),t._v(" "),s("p",[t._v("åŽç»­è¿žæŽ¥é’±åŒ…çœ‹metamaskå…·ä½“è®¾ç½®")]),t._v(" "),s("h3",{attrs:{id:"ganache-å…¥é—¨ä»‹ç»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ganache-å…¥é—¨ä»‹ç»"}},[t._v("#")]),t._v(" ganache å…¥é—¨ä»‹ç»")]),t._v(" "),s("h4",{attrs:{id:"è´¦å·accounts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è´¦å·accounts"}},[t._v("#")]),t._v(" è´¦å·Accounts")]),t._v(" "),s("p",[t._v("ç•Œé¢ä¸»ä½“æœ‰10ä¸ªè´¦å·ï¼Œåˆ†åˆ«åˆ—å‡ºäº†æ¯ä¸ªè´¦å·çš„åœ°å€ï¼Œä½™é¢ï¼Œå·²ç»å®Œæˆçš„äº¤æ˜“æ•°é‡ã€è´¦å·æ•°ç»„ä¸­çš„ç´¢å¼•ã€æ˜¾ç¤ºç§é’¥æŒ‰é’®ç­‰ã€‚ç‚¹å‡»é‚£ä¸ªé’¥åŒ™å›¾æ ‡ï¼Œå°±ä¼šæ˜¾ç¤ºå®ƒçš„ç§é’¥")]),t._v(" "),s("h4",{attrs:{id:"blocks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#blocks"}},[t._v("#")]),t._v(" Blocks")]),t._v(" "),s("p",[t._v("ç‚¹å‡»å¯¼èˆªä¸Šçš„Blocksï¼Œå¯ä»¥çœ‹åˆ°ç›®å‰Blockæ˜¯0,blockè®°å½•åœ¨é“¾ä¸Šçš„åŒºå—ä¿¡æ¯ï¼ŒåªåŒ…å«æˆåŠŸçš„transactionsä¿¡æ¯.\nè¿™æ˜¯å› ä¸ºGanacheæŒ–çŸ¿æœºåˆ¶å†³å®šçš„ï¼Œæ¯ä¸€ä¸ªäº¤æ˜“äº§ç”Ÿä¸€ä¸ªblockï¼Œæ‰€ä»¥ä¸€ä¸ªblockä¹Ÿåªä¼šæœ‰ä¸€ç¬”äº¤æ˜“ã€‚åœ¨æˆ‘ä»¬äº¤æ˜“åŽå°±ä¼šäº§ç”Ÿä¸€ä¸ªblockï¼Œç›®å‰è¿˜æ²¡æœ‰")]),t._v(" "),s("h4",{attrs:{id:"transactions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transactions"}},[t._v("#")]),t._v(" Transactions")]),t._v(" "),s("p",[t._v("ç”Ÿæˆçš„äº¤æ˜“ä¿¡æ¯ï¼Œæœ‰æˆåŠŸè®°å½•åˆ°åŒºå—ä¸Šçš„ï¼Œä¹Ÿæœ‰æ²¡æœ‰æˆåŠŸè®°å½•ä¸Šçš„")]),t._v(" "),s("h4",{attrs:{id:"contracts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#contracts"}},[t._v("#")]),t._v(" contracts")]),t._v(" "),s("p",[t._v("å› ä¸ºä»¬å·¥ä½œç©ºé—´å¹¶æ²¡æœ‰æ·»åŠ truffleå·¥ç¨‹ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿæ˜¯ç©ºçš„ã€‚")]),t._v(" "),s("h2",{attrs:{id:"metamaské“¾æŽ¥æœ¬åœ°ganacheç½‘ç»œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#metamaské“¾æŽ¥æœ¬åœ°ganacheç½‘ç»œ"}},[t._v("#")]),t._v(" metamaské“¾æŽ¥æœ¬åœ°ganacheç½‘ç»œ")]),t._v(" "),s("ol",[s("li",[t._v("metamask è®¾ç½®")])]),t._v(" "),s("img",{attrs:{width:"330",src:t.$withBase("/img/metamask1.png")}}),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("æ‰¾åˆ°ç½‘ç»œ")])]),t._v(" "),s("img",{attrs:{width:"330",src:t.$withBase("/img/metamask2.png")}}),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("ç‚¹å‡»æ·»åŠ ç½‘ç»œ")])]),t._v(" "),s("img",{attrs:{width:"330",src:t.$withBase("/img/metamask3.png")}}),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("æŸ¥çœ‹ganache ç½‘ç»œä¿¡æ¯")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/img/ganache3.png")}}),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("å¡«å†™æœ¬åœ°/é“¾ä¸Šçš„åœ°å€ä¿¡æ¯")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/img/metamask4.png")}}),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("é€‰æ‹©åˆšæ‰æ·»åŠ çš„ç½‘ç»œ")])]),t._v(" "),s("img",{attrs:{width:"330",src:t.$withBase("/img/metamask5.png")}}),t._v(" "),s("ol",{attrs:{start:"7"}},[s("li",[t._v("é’ˆå¯¹åˆšæ‰çš„ç½‘ç»œï¼Œæ·»åŠ è´¦æˆ·ï¼Œéœ€è¦å…ˆæŸ¥çœ‹ganacheæä¾›çš„é»˜è®¤10ä¸ªè´¦å·ä¸­çš„æŸä¸ªç§é’¥")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/img/ganache4.png")}}),t._v(" "),s("ol",{attrs:{start:"8"}},[s("li",[t._v("å¤åˆ¶ç§é’¥")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/img/ganache5.png")}}),t._v(" "),s("ol",{attrs:{start:"9"}},[s("li",[t._v("metamask é€‰æ‹©ç½‘ç»œåŽï¼Œç‚¹å‡»å¯¼å…¥è´¦æˆ·")])]),t._v(" "),s("img",{attrs:{width:"330",src:t.$withBase("/img/ganache6.png")}}),t._v(" "),s("ol",{attrs:{start:"10"}},[s("li",[t._v("å°†åˆšæ‰å¤åˆ¶çš„ç§é’¥ï¼Œå†™è¿›å…¥å³å¯")])]),t._v(" "),s("img",{attrs:{width:"330",src:t.$withBase("/img/ganache7.png")}}),t._v(" "),s("ol",{attrs:{start:"11"}},[s("li",[t._v("åˆ·æ–°å³å¯çœ‹åˆ°ä½™é¢")])]),t._v(" "),s("img",{attrs:{width:"330",src:t.$withBase("/img/ganache8.png")}}),t._v(" "),s("p",[t._v("è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ metamaské’±åŒ… é“¾æŽ¥æœ¬åœ° ganache åˆ›å»ºçš„é“¾å°±æˆåŠŸäº†ï¼Œæˆ‘ä»¬åŽé¢æŠŠæˆ‘ä»¬å†™çš„æ™ºèƒ½åˆçº¦å‘å¸ƒåˆ°æˆ‘ä»¬çš„æœ¬åœ°é“¾ä¸Šå³å¯")]),t._v(" "),s("h2",{attrs:{id:"metamask-å¼€å‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#metamask-å¼€å‘"}},[t._v("#")]),t._v(" MetaMask å¼€å‘")]),t._v(" "),s("p",[t._v("MetaMaské’±åŒ…æä¾›äº†ä¸€ç³»åˆ—çš„APIè®©æˆ‘ä»¬çš„DAPPå¯ä»¥å’Œé’±åŒ…è¿›è¡Œäº¤äº’")]),t._v(" "),s("p",[t._v("æ–‡æ¡£åœ°å€ï¼š"),s("a",{attrs:{href:"https://docs.metamask.io/guide/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.metamask.io/guide/"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"metamask-ä»¥å¤ªåŠä¸€é”®ç™»å½•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#metamask-ä»¥å¤ªåŠä¸€é”®ç™»å½•"}},[t._v("#")]),t._v(" MetaMask ä»¥å¤ªåŠä¸€é”®ç™»å½•")]),t._v(" "),s("ol",[s("li",[t._v("æ£€æŸ¥æ˜¯å¦æ”¯æŒMetaMask")]),t._v(" "),s("li",[t._v("ç‚¹å‡»ç™»å½•èŽ·å–é’±åŒ…æŽˆæƒ")]),t._v(" "),s("li",[t._v("èŽ·å–é’±åŒ…ä¿¡æ¯ã€è¿›è¡Œäº‹ä»¶ç›‘å¬")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ethers\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ethers'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MetaMaskOnboarding "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@metamask/onboarding'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Message\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 1. ä¸»åŠ¨è¿žæŽ¥é’±åŒ… { æ£€éªŒæ˜¯å®‰è£…æµè§ˆå™¨æ’ä»¶ å¦‚æ²¡æœ‰ å¼¹çª—æç¤º å¼•å¯¼å®˜ç½‘å®‰è£… }\n * 2. è‡ªåŠ¨èŽ·å–é’±åŒ…ä¿¡æ¯\n * 3. ç›‘å¬åˆ‡æ¢ç½‘ç»œï¼Œç›‘å¬ç”¨æˆ·å…³é—­ç½‘ç«™æŽˆæƒ\n * 4. æ·»åŠ ç½‘ç»œ\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("connectMetaMask")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connectMetaMask")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isMetaMaskInstalled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ¤æ–­æ˜¯å¦å®‰è£…MetaMaskæ‰©å±•å·¥å…·")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" forwarderOrigin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("origin\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" onboarding "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MetaMaskOnboarding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      forwarderOrigin\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·³è½¬åº”ç”¨å•†åº—ï¼Œå®‰è£…é’±åŒ…")]),t._v("\n    onboarding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startOnboarding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" provider "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ethers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("providers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Web3Provider")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŽ·å–ç”¨æˆ·çš„ä»¥å¤ªåŠè´¦æˆ·åœ°å€")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" accounts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'eth_requestAccounts'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" chainId "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getNetwork")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" account "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" accounts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chainChanged'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chainId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      Message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç½‘ç»œåˆ‡æ¢'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chainId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'accountsChanged'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("accounts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      Message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è´¦æˆ·åˆ‡æ¢'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" accounts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// messageï¼štype: stringã€data")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ”¶åˆ°ä¸€äº›åº”è¯¥é€šçŸ¥æ¶ˆè´¹è€…çš„æ¶ˆæ¯æ—¶è§¦å‘'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“ MetaMask æä¾›è€…ç¬¬ä¸€æ¬¡èƒ½å¤Ÿå‘é“¾æäº¤ RPC è¯·æ±‚æ—¶ï¼Œå®ƒä¼šå‘å‡ºæ­¤äº‹ä»¶")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connect'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç»“åˆethereum.isConnected()ç¡®å®šä½•æ—¶/æ˜¯å¦è¿žæŽ¥äº†æä¾›ç¨‹åº'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'disconnect'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'walletType'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'walletTypeVerify'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ä¸ªæ—¶å€™å°±ä¸ä¼šæŽ¥å—ä»»ä½•æ–°çš„è¯·æ±‚äº†ï¼Œå¿…é¡»åˆ·æ–°é¡µé¢ç¡®è®¤æ˜¯å¦æ–°çš„é“¾æŽ¥ï¼Œæˆ–è€…ä½¿ç”¨æ–¹æ³•ethereum.isConnected()")]),t._v("\n      Message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ–­å¼€ã€é“¾æŽ¥å¤±è´¥'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reactä¸­å¸è½½ç»„ä»¶çš„æ—¶å€™ï¼šethereum.removeListener('accountsChanged', function);")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      account"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      chainId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    Message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Created check function to see if the MetaMask extension is installed")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isMetaMaskInstalled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Have to check the ethereum binding on the window object to see if it's installed")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ethereum "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ethereum "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isMetaMask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"è°ƒç”¨json-rpcæ ¼å¼çš„è¯·æ±‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒç”¨json-rpcæ ¼å¼çš„è¯·æ±‚"}},[t._v("#")]),t._v(" è°ƒç”¨JSON-RPCæ ¼å¼çš„è¯·æ±‚")]),t._v(" "),s("p",[t._v("json-rpcæ˜¯ä¸€ä¸ªåŸºäºŽjsonçš„è·¨è¯­è¨€è¿œç¨‹è°ƒç”¨åè®®ï¼Œweb3.js é€šè¿‡RPCè°ƒç”¨ä¸Žæœ¬åœ°èŠ‚ç‚¹é€šä¿¡ï¼Œæˆ‘ä»¬çš„é’±åŒ…MetaMask ä½¿ç”¨è¯¥ethereum.request(args)æ–¹æ³•æ¥åŒ…è£… RPC AP")]),t._v(" "),s("p",[t._v("å‚è€ƒåœ°å€ï¼šä»¥å¤ªåŠ"),s("a",{attrs:{href:"https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_accounts",target:"_blank",rel:"noopener noreferrer"}},[t._v("wiki"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("è°ƒç”¨å‚è€ƒ-èŽ·å–è´¦æˆ·åœ°å€ï¼š")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("ethereum\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'eth_requestAccounts'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handleAccountsChanged"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// EIP-1193 userRejectedRequest error")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Please connect to MetaMask.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);